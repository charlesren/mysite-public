<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Asus Z390i 9700k Hackintosh With OpenCore - CharlesRen</title><meta name="Description" content="About DoIt Theme"><meta property="og:title" content="Asus Z390i 9700k Hackintosh With OpenCore" />
<meta property="og:description" content="硬件配置    配件 型号 价格     散热 海盗船h60 378.9   电源 海盗船sf600 698.9   机箱 追风者217e 700   主板 华硕rog z390i 1869   显示器 dell2419 1498.5   硬盘 三星970evo500g 879   硅脂 猫头鹰nt-h1 18.9   cpu 9700k Coffee Lake Refresh 630核显 FCLGA1151 2459   无线网卡 dell dw1560（bcm94352z） 185   内存 USCORSAIR 32GB(16x2) DDR4 3200 复仇者LPX系列    键盘 高斯 GS87D    鼠标 Apple Trackpad 2     参考文档 OpenCore Install Guide" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" /><meta property="og:image" content="https://charlesren.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-04T17:39:57&#43;08:00" />
<meta property="article:modified_time" content="2021-03-08T17:39:09&#43;08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://charlesren.github.io/logo.png"/>

<meta name="twitter:title" content="Asus Z390i 9700k Hackintosh With OpenCore"/>
<meta name="twitter:description" content="硬件配置    配件 型号 价格     散热 海盗船h60 378.9   电源 海盗船sf600 698.9   机箱 追风者217e 700   主板 华硕rog z390i 1869   显示器 dell2419 1498.5   硬盘 三星970evo500g 879   硅脂 猫头鹰nt-h1 18.9   cpu 9700k Coffee Lake Refresh 630核显 FCLGA1151 2459   无线网卡 dell dw1560（bcm94352z） 185   内存 USCORSAIR 32GB(16x2) DDR4 3200 复仇者LPX系列    键盘 高斯 GS87D    鼠标 Apple Trackpad 2     参考文档 OpenCore Install Guide"/>
<meta name="application-name" content="DoIt">
<meta name="apple-mobile-web-app-title" content="DoIt">

<meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" /><link rel="prev" href="https://charlesren.github.io/mysite-public/linux%E6%B7%BB%E5%8A%A0%E7%89%B9%E6%9D%83%E7%94%A8%E6%88%B7/" /><link rel="next" href="https://charlesren.github.io/mysite-public/aix%E6%8C%82%E8%BD%BD%E5%85%89%E7%9B%98%E9%95%9C%E5%83%8F/" /><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/mysite-public/lib/normalize/normalize.min.css">
    <noscript><link rel="stylesheet" href="/mysite-public/lib/normalize/normalize.min.css"></noscript><link rel="stylesheet" href="/mysite-public/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/mysite-public/lib/fontawesome-free/all.min.css">
    <noscript><link rel="stylesheet" href="/mysite-public/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/mysite-public/lib/animate/animate.min.css">
    <noscript><link rel="stylesheet" href="/mysite-public/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Asus Z390i 9700k Hackintosh With OpenCore",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/charlesren.github.io\/mysite-public\/asus-z390i-9700k-hackintosh-with-opencore\/"
        },"image": ["https:\/\/charlesren.github.io\/images\/Apple-Devices-Preview.png"],"genre": "posts","wordcount":  1099 ,
        "url": "https:\/\/charlesren.github.io\/mysite-public\/asus-z390i-9700k-hackintosh-with-opencore\/","datePublished": "2021-03-04T17:39:57+08:00","dateModified": "2021-03-08T17:39:09+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/charlesren.github.io\/mysite-public\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "CharlesRen"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
            if (window.localStorage && localStorage.getItem('theme')) {
                let theme = localStorage.getItem('theme');
                if (theme === 'light' || theme === 'dark' || theme === 'black') {
                    document.body.setAttribute('theme', theme);
                } else {
                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.body.setAttribute('theme', 'dark');
                    }
                    else {
                        document.body.setAttribute('theme', 'light');
                    }
                }
            } else {
                if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') {
                    document.body.setAttribute('auto');
                    window.localStorage && localStorage.setItem('theme', 'auto');
                } else {
                    window.localStorage && localStorage.setItem('theme', 'auto');
                    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                        document.body.setAttribute('theme', 'dark');
                    }
                    else {
                        document.body.setAttribute('theme', 'light');
                    }
                }
            }
            function getMeta(metaName) {
                const metas = document.getElementsByTagName('meta'); 
                for (let i = 0; i < metas.length; i++) {
                    if (metas[i].getAttribute('name') === metaName) {
                        return metas[i];
                    }
                }
                return '';
            }
            let themeColorMeta = getMeta('theme-color');
            if (document.body.getAttribute('theme') != 'light') {
                themeColorMeta.content = '#000000';
            }
        </script>
        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/mysite-public/" title="CharlesRen"><span class="header-title-pre"><i class='far fa-edit fa-fw'></i></span>CharlesRen</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/mysite-public/posts/"> Posts </a><a class="menu-item" href="/mysite-public/tags/"> Tags </a><a class="menu-item" href="/mysite-public/categories/"> Categories </a><a class="menu-item" href="/mysite-public/categories/documentation/"> Docs </a><a class="menu-item" href="/mysite-public/about/"> About </a><a class="menu-item" href="https://github.com/charlesren" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" selected>English</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-select" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw"></i>
                    <select class="color-theme-select" id="theme-select-desktop" title="Switch Theme">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="black">Black</option>
                        <option value="auto">Auto</option>
                    </select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/mysite-public/" title="CharlesRen"><span class="header-title-pre"><i class='far fa-edit fa-fw'></i></span>CharlesRen</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/mysite-public/posts/" title="">Posts</a><a class="menu-item" href="/mysite-public/tags/" title="">Tags</a><a class="menu-item" href="/mysite-public/categories/" title="">Categories</a><a class="menu-item" href="/mysite-public/categories/documentation/" title="">Docs</a><a class="menu-item" href="/mysite-public/about/" title="">About</a><a class="menu-item" href="https://github.com/charlesren" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-select" title="Switch Theme">
                <i class="fas fa-adjust fa-fw"></i>
                <select class="color-theme-select" id="theme-select-mobile" title="Switch Theme">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                    <option value="black">Black</option>
                    <option value="auto">Auto</option>
                </select>
            </a><a href="javascript:void(0);" class="menu-item" title="Select Language">English<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" selected>English</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><script>document.body.setAttribute("pageStyle", "wide")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Asus Z390i 9700k Hackintosh With OpenCore</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://charlesren.github.io/mysite-public/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>CharlesRen</a></span>&nbsp;<span class="post-category">included in <a href="/mysite-public/categories/tools/"><i class="far fa-folder fa-fw"></i>Tools</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-03-04">2021-03-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;1099 words&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;6 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#硬件配置">硬件配置</a></li>
        <li><a href="#参考文档">参考文档</a></li>
        <li><a href="#工具准备">工具准备</a>
          <ul>
            <li><a href="#硬件">硬件</a></li>
            <li><a href="#软件">软件</a></li>
          </ul>
        </li>
        <li><a href="#安装步骤">安装步骤</a>
          <ul>
            <li><a href="#bios设置">BIOS设置</a></li>
            <li><a href="#创建macos安装u盘">创建macOS安装U盘</a></li>
            <li><a href="#efi准备">EFI准备</a></li>
            <li><a href="#opencore启动盘制作">OpenCore启动盘制作</a></li>
            <li><a href="#安装macos">安装macOS</a></li>
            <li><a href="#硬盘启动配置">硬盘启动配置</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h3 id="硬件配置">硬件配置</h3>
<table>
<thead>
<tr>
<th>配件</th>
<th>型号</th>
<th>价格</th>
</tr>
</thead>
<tbody>
<tr>
<td>散热</td>
<td>海盗船h60</td>
<td>378.9</td>
</tr>
<tr>
<td>电源</td>
<td>海盗船sf600</td>
<td>698.9</td>
</tr>
<tr>
<td>机箱</td>
<td>追风者217e</td>
<td>700</td>
</tr>
<tr>
<td>主板</td>
<td>华硕rog z390i</td>
<td>1869</td>
</tr>
<tr>
<td>显示器</td>
<td>dell2419</td>
<td>1498.5</td>
</tr>
<tr>
<td>硬盘</td>
<td>三星970evo500g</td>
<td>879</td>
</tr>
<tr>
<td>硅脂</td>
<td>猫头鹰nt-h1</td>
<td>18.9</td>
</tr>
<tr>
<td>cpu</td>
<td>9700k Coffee Lake Refresh 630核显 FCLGA1151</td>
<td>2459</td>
</tr>
<tr>
<td>无线网卡</td>
<td>dell  dw1560（bcm94352z）</td>
<td>185</td>
</tr>
<tr>
<td>内存</td>
<td>USCORSAIR 32GB(16x2) DDR4 3200 复仇者LPX系列</td>
<td></td>
</tr>
<tr>
<td>键盘</td>
<td>高斯 GS87D</td>
<td></td>
</tr>
<tr>
<td>鼠标</td>
<td>Apple Trackpad 2</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="参考文档">参考文档</h3>
<p><a href="https://dortania.github.io/OpenCore-Install-Guide/" target="_blank" rel="noopener noreffer">OpenCore Install Guide</a></p>
<p><a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreffer">Getting Started With ACPI</a></p>
<p><a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreffer">Wireless Buyers Guide</a></p>
<p><a href="https://heipg.cn/tutorial/one-key-opencore-efi.html" target="_blank" rel="noopener noreffer">一键生成黑苹果 OpenCore EFI 文件OC.Gen-X</a></p>
<h3 id="工具准备">工具准备</h3>
<h4 id="硬件">硬件</h4>
<p><strong>方案一: OpenCore boot Manager 与macOS 安装U盘分离</strong></p>
<ol>
<li>U盘1 : 16GB或以上容量,用于创建macOS安装U盘</li>
<li>U盘2 : 4GB或以上容量，用于安装OpenCore boot Manager</li>
</ol>
<blockquote>
<p>OpenCore boot Manager与macOS 系统分离优点</p>
<ul>
<li>可以单独升级OpenCore boot Manager</li>
<li>用Apple推荐的方法创建macOS启动盘(没有任何第三方bootloaders),此U盘还可以用于安装升级白苹果.</li>
<li>安装完成后，OpenCore boot Manager U盘也会成为永久的启动U盘.(也可以把EFI文件拷贝到硬盘的EFI分区，从硬盘启动)</li>
</ul>
<p><em>当选择从OpenCore boot Manager U盘启动后, Clover/OC should display one more option (Install macOS from the other USB)</em></p>
</blockquote>
<p><strong>方案二：OpenCore boot Manager与macOS 安装U盘合二为一</strong></p>
<p>需一个U盘 : 16GB或以上容量,用于创建OpenCore boot manager及macOS安装U盘</p>
<blockquote>
<p>One flash drive is always sufficient, you can format it using Disk Utility choosing Mac OS Extended (journal) with a GUID boot partition. It adds a UEFI partition you can mount, and then copy and paste EFI folder there.</p>
</blockquote>
<h4 id="软件">软件</h4>
<p><a href="https://github.com/Pavo-IM/OC-Gen-X" target="_blank" rel="noopener noreffer">OC Gen X</a> :用于生成基础EFI文件</p>
<p><a href="https://github.com/corpnewt/ProperTree" target="_blank" rel="noopener noreffer">ProperTree</a> :用于修改config.plist文件及加载SSDT</p>
<blockquote>
<p>ProperTree修改config.plist方法参考：<a href="https://dortania.github.io/OpenCore-Install-Guide/config.plist/" target="_blank" rel="noopener noreffer">OpenCore Install Guide &gt; USB Creation &gt; config.plist Setup</a> 章节</p>
</blockquote>
<h3 id="安装步骤">安装步骤</h3>
<h4 id="bios设置">BIOS设置</h4>
<p><strong>设置内容</strong></p>
<p>参考 <a href="https://dortania.github.io/OpenCore-Install-Guide/" target="_blank" rel="noopener noreffer">OpenCore Install Guide</a>文档的Configs &gt; Coffee Lake &gt; Intel BIOS settings章节</p>
<p>Disable</p>
<ul>
<li>Fast Boot</li>
<li>Secure Boot</li>
<li>Serial/COM Port</li>
<li>Parallel Port</li>
<li>VT-d (can be enabled if you set DisableIoMapper to YES)</li>
<li>CSM</li>
<li>Thunderbolt(For initial install, as Thunderbolt can cause issues if not setup correctly)</li>
<li>Intel SGX</li>
<li>Intel Platform Trust</li>
<li>CFG Lock (MSR 0xE2 write protection)
<blockquote>
<p>(This must be off, if you can&rsquo;t find the option then enable AppleXcpmCfgLock under Kernel -&gt; Quirks. Your hack will not boot with CFG-Lock enabled)</p>
</blockquote>
</li>
</ul>
<p>Enable</p>
<ul>
<li>VT-x</li>
<li>Above 4G decoding
<blockquote>
<p>Advanced Items &gt; System Agent (SA) Configuration &gt; Above 4G Decoding &gt; Enable</p>
</blockquote>
</li>
<li>Hyper-Threading</li>
<li>Execute Disable Bit</li>
<li>EHCI/XHCI Hand-off
<blockquote>
<p>Advanced Items &gt; USB Configuration &gt; XHCI Hand Off &gt; Enabled</p>
</blockquote>
</li>
<li>OS type: Windows 8.1/10 UEFI Mode</li>
<li>DVMT Pre-Allocated(iGPU Memory): 64MB
<blockquote>
<p>Advanced Items &gt; System Agent (SA) Graphics Configuration &gt; DVMT Pre-Allocated &gt; 64</p>
</blockquote>
</li>
<li>SATA Mode: AHCI</li>
</ul>
<p><strong>设置方法</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">1. Plug your monitor into your video cards DisplayPort to avoid graphics issues. You can use HDMI if it&#39;s all you have
2. Start your machine and use 1 of these methods to get onto BIOS during boot:

       a) Rapidly tap the delete key
       b) Rapidly tap the F2 key (some keyboards may need to have the Function key held down)
       c) Press and hold the Function key while rapidly tapping the Backspace key??

3. Check the BIOS version and update it if it is not the latest one
4. If you have previously set your BIOS, it would be best to do a CMOS reset by shorting the 2 pins on the front left corner of your motherboard. Please se instructions for complete details
5. In the main screen middle left, set X.M.P. to Enabled
6. Advanced Items &gt; CPU Configuration &gt; Intel (VMX) Virtualization Technology &gt; Enable - Absolutely required for Parallels
7. Advanced Items &gt; System Agent (SA) Graphics Configuration &gt; Primary Display &gt; PEG for DGPU, CPU for IGPU
8. Advanced Items &gt; System Agent (SA) Graphics Configuration &gt; IGPU Multi-Monitor &gt; Enabled for DGPU, Disabled for IGPU
9. Save and reboot to activate the RC6 and DVMT settings
10. Advanced Items &gt; System Agent (SA) Graphics Configuration &gt; RC6(Render Standby) &gt; Off - This settings disables a power saving feature that could potentially crash the system
13. Advanced Items &gt; USB Configuration &gt; Legacy USB Support &gt; Disabled
15. Boot Menu &gt; Boot Option 1 &gt; UEFI USB installer drive (or whatever you named it, UEFI will be automatically prepended)
16. Exit &gt; Save Changes

    There are few things you can tweak to eliminate ugly boot graphics and make BIOS menus easier to navigate:

17. Boot &gt; Boot Configuration &gt; Boot Logo Display &gt; Disabled
18. Boot &gt; Boot Configuration &gt; Post Report &gt; 1 Sec
19. Boot &gt; Setup Mode &gt; Advanced

    I love this next feature because it allows you to save your BIOS settings so you can play around without having to wipe them and start over.

20. Tools &gt; Asus User Profile &gt; Profile Name &gt; OSX (or whatever you like)
21. Tools &gt; Asus User Profile &gt; Save to Profile &gt; 1 (hit enter to save)
</code></pre></td></tr></table>
</div>
</div><h4 id="创建macos安装u盘">创建macOS安装U盘</h4>
<p>参考Apple官方文档: <a href="https://support.apple.com/en-us/HT201372" target="_blank" rel="noopener noreffer">How to create a bootable installer for macOS</a></p>
<h4 id="efi准备">EFI准备</h4>
<blockquote>
<p>最终的EFI已上传到<a href="https://github.com/charlesren/Hackintosh-AsusZ390i-OpenCore" target="_blank" rel="noopener noreffer">Github</a></p>
</blockquote>
<p><strong>SSDT准备</strong></p>
<ul>
<li>
<p>通用SSDT</p>
<p><em>参考<a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreffer">Getting Started With ACPI</a></em></p>
<p>直接从<a href="https://github.com/acidanthera/OpenCorePkg" target="_blank" rel="noopener noreffer">OpenCorePkg</a>项目下载</p>
</li>
<li>
<p>定制USB</p>
<p>使用网上Z390-i定制好的<a href="https://www.tonymacx86.com/threads/the-everything-works-asus-z390-i-gaming-i7-8700k-sapphire-nitro-radeon-rx-vega-64-build.272572/" target="_blank" rel="noopener noreffer">SSDT-UIAC.aml</a>
<strong>使用 OC Gen X 生成基础EFI文件</strong></p>
</li>
</ul>
<blockquote>
<p>需要的Firmware Drivers &amp;  Kexts &amp; SSDTS参考<a href="https://dortania.github.io/OpenCore-Install-Guide/ktext.html" target="_blank" rel="noopener noreffer">OpenCore Install Guide &gt; USB Creation &gt; Gathering files</a></p>
</blockquote>
<p>配置如下：</p>
<p>System Type : <strong>Coffee Lake</strong></p>
<p>Kext &gt; Essential : <strong>Lilu &amp; VirtualSMC</strong></p>
<p>Kext &gt; VirtualSMC Plugins : <strong>SMCProcessor &amp; SMCSuperIO</strong></p>
<p>Kext &gt; Graphics : <strong>WhateverGreen</strong></p>
<p>Kext &gt; Audio : <strong>AppleALC</strong></p>
<p>Kext &gt; Ethernet : <strong>InteMausi</strong></p>
<p>Kext &gt; USB : <strong>USBInjectAll</strong></p>
<p>Kext &gt; WiFI and Bluetooth : <strong>AirportBrcmFixup &amp; BrcmPatchRAM3 &amp; BrcmBluetoothInjector &amp; BrcmFiremwareData</strong></p>
<p>Kext &gt; Extra&rsquo;s : <strong>Null</strong></p>
<p>Firmware Drivers &gt; UEFI : <strong>OpenRuntime.efi &amp; HfsPlus.efi</strong></p>
<p>SMBIOS &gt; System Model : <strong>iMac19.1</strong></p>
<p><strong>添加SSDT并修改config.plist</strong></p>
<ol>
<li>把SSDT文件拷贝到<strong>EFI/OC/ACPI</strong>目录下</li>
<li>运行ProperTree,打开EFI/OC/config.plist文件.</li>
<li>config.plist文件打开后, 按Cmd/Ctrl + Shift + R 快捷键,然后选中 EFI/OC 文件夹,用来<strong>Clean Snapshot</strong>
<blockquote>
<ul>
<li>
<p>This will remove all the entries from the config.plist and then adds all your SSDTs, Kexts and Firmware drivers to the config</p>
</li>
<li>
<p>Cmd/Ctrl + R is another option that will add all your files as well but will leave entries disabled if they were set like that before, useful for when you&rsquo;re troubleshooting but for us not needed right now</p>
</li>
</ul>
</blockquote>
</li>
<li>完成后，会发现SSDTs, Kexts and firmware drivers 在 config.plist里出现了.</li>
<li>保存设置并关闭ProperTree软件.</li>
</ol>
<p><strong>DW1560修正</strong></p>
<blockquote>
<p><strong>问题:</strong></p>
<p>安装过程中出现**IOKit Daemon (kernelmanagerd) stall[0], (240s): &lsquo;PXSX&rsquo;**字样，似乎中断240s,大概会重复三次，然后才能安装完成。完成后，系统连接不上wifi.</p>
</blockquote>
<p>搜索发现有网友也出现<a href="https://www.tonymacx86.com/threads/solved-iokit-daemon-kernelmanagerd-stall-0-240s-pxsx.303324/" target="_blank" rel="noopener noreffer">IOKit Daemon (kernelmanagerd) stall[0], (240s): &lsquo;PXSX&rsquo;</a>问题。问题初步定位在DW1560上。</p>
<p>根据以上线索，结合DW1560相关kext，在<a href="https://github.com/acidanthera/AirportBrcmFixup#please-pay-attention" target="_blank" rel="noopener noreffer">AirportBrcmFixup</a>页面，发现如下信息：</p>
<blockquote>
<p>In 11 (Big Sur) class AirPortBrcm4360 has been completely removed. Using of injector kext with such class name and matched vendor-id:device-id blocks loading of original airport kext.</p>
<p>To address this issue and keep compatibility with older systems injectors for AirPortBrcm4360 and AirPortBrcmNIC were removed from main Info.plist file. Instead, the two new kext injectors are deployed in PlugIns folder: AirPortBrcm4360_Injector.kext and AirPortBrcmNIC_Injector.kext.</p>
<p><strong>You have to block (or remove) AirPortBrcm4360_Injector.kext in BigSur.</strong></p>
<ul>
<li>In OpenCore you can specify MaxKernel 19.9.9 for AirPortBrcm4360_Injector.kext.</li>
</ul>
</blockquote>
<p><strong>解决方案:</strong></p>
<p>Specify MaxKernel 19.9.9 for AirPortBrcm4360_Injector.kext in config.plist file.</p>
<h4 id="opencore启动盘制作">OpenCore启动盘制作</h4>
<blockquote>
<p>OpenCore启动盘创建方法参考：<a href="https://dortania.github.io/OpenCore-Install-Guide/installer-guide/" target="_blank" rel="noopener noreffer">OpenCore Install Guide &gt; USB Creation &gt; Creating the USB</a> 章节</p>
</blockquote>
<p><strong>本次使用OenCore boot Manager 与macOS 安装U盘分离方案，所以不需要执行手册中下载macOS，载入macOS等部分</strong></p>
<p>以在macOS系统下操作为例:</p>
<ul>
<li>格式化U盘2.
<blockquote>
<p>use macOS Extended (HFS+) with a GUID partition map. This will create two partitions: the main MyVolume and a second called EFI which is used as a boot partition where your firmware will check for boot files.</p>
</blockquote>
</li>
<li>挂载EFI</li>
<li>把上面最终的EFI文件夹拷贝到EFI分区</li>
</ul>
<h4 id="安装macos">安装macOS</h4>
<ol>
<li>插入U盘1,U盘2</li>
<li>启动电脑，快速按F8键，选择从OpenCore U盘启动</li>
<li>正常安装macOS</li>
</ol>
<h4 id="硬盘启动配置">硬盘启动配置</h4>
<p><strong>本章节为可选配置，正常情况下，总是从U盘2启动;当期望从硬盘启动时，执行如下步骤</strong></p>
<ol>
<li>查看硬盘的EFI分区名称</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">diskutil list
</code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>挂载硬盘的EFI分区</li>
</ol>
<blockquote>
<p>以EFI分区为disk0s1为例</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">sudo diskutil mount disk0s1 
</code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>把最终EFI文件夹拷贝到硬盘EFI分区</li>
</ol>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2021-03-08&nbsp;<a class="git-hash" href="https://github.com/charlesren/DoIt/commit/2599c7fc1954a9ccdf820b4e210bddf99868cc69" target="_blank" title="commit by charlesren(renccn@gmail.com) 2599c7fc1954a9ccdf820b4e210bddf99868cc69: rebuilding site Mon Mar  8 17:39:09 CST 2021" rel="noopener noreferrer">
                                    <i class="fas fa-hashtag fa-fw"></i>2599c7f</a></span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/index.md" target="_blank" rel="noopener noreferrer">Read Markdown</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" data-title="Asus Z390i 9700k Hackintosh With OpenCore"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" data-title="Asus Z390i 9700k Hackintosh With OpenCore"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" data-title="Asus Z390i 9700k Hackintosh With OpenCore"><i data-svg-src="/mysite-public/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://charlesren.github.io/mysite-public/asus-z390i-9700k-hackintosh-with-opencore/" data-title="Asus Z390i 9700k Hackintosh With OpenCore"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/mysite-public/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/mysite-public/linux%E6%B7%BB%E5%8A%A0%E7%89%B9%E6%9D%83%E7%94%A8%E6%88%B7/" class="prev" rel="prev" title="Linux添加特权用户"><i class="fas fa-angle-left fa-fw"></i>Linux添加特权用户</a>
            <a href="/mysite-public/aix%E6%8C%82%E8%BD%BD%E5%85%89%E7%9B%98%E9%95%9C%E5%83%8F/" class="next" rel="next" title="Aix挂载光盘镜像">Aix挂载光盘镜像<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.81.0">Hugo</a> | Theme - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreffer" title="DoIt 0.2.10"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://charlesren.github.io/mysite-public/" target="_blank" rel="noopener noreferrer">CharlesRen</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div><script>
            if('serviceWorker' in navigator) {
                navigator.serviceWorker
                    .register('/sw.min.js', { scope: '/' })
                    .then(function(registration) {
                        
                    });
          
                navigator.serviceWorker
                    .ready
                    .then(function(registration) {
                        
                    });
            }
          </script></footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><script type="text/javascript" src="/mysite-public/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/mysite-public/lib/algoliasearch/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="/mysite-public/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/mysite-public/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/mysite-public/lib/sharer/sharer.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{},"search":{"algoliaAppID":"5YGRNRQK1G","algoliaIndex":"en_index","algoliaSearchKey":"0ff6874805de24b84aa1d5ebccad56cd","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type="text/javascript" src="/mysite-public/js/theme.min.js"></script></body>
</html>
